{{/* Header partial with responsive navigation and theme toggle - Requirements 7.1, 7.2, 7.3 */}}
<header role="banner" style="border-bottom: 1px solid var(--color-border);">
  <div class="container" style="padding-top: var(--space-6); padding-bottom: var(--space-6);">
    <nav id="navigation" role="navigation" aria-label="Main navigation" style="display: flex; align-items: center; justify-content: space-between;">
      {{/* Site title/logo */}}
      <div>
        <a href="{{ "/" | relURL }}" 
           style="font-size: var(--text-2xl); font-weight: var(--font-bold); color: var(--color-heading); text-decoration: none; transition: color var(--transition-fast);"
           onmouseover="this.style.color='var(--color-link)'"
           onmouseout="this.style.color='var(--color-heading)'"
           class="site-title-link">
          {{ site.Title }}
        </a>
      </div>
      
      {{/* Desktop Navigation */}}
      <div class="nav-desktop" style="display: flex; align-items: center; gap: var(--space-6);">
        {{/* Main navigation menu with hierarchical support */}}
        {{ partial "navigation-menu.html" . }}
        
        {{/* Theme toggle button */}}
        {{ partial "theme-toggle.html" . }}
      </div>
      
      {{/* Mobile Navigation Toggle */}}
      <div class="nav-mobile">
        <button 
          id="mobile-menu-toggle" 
          type="button"
          class="mobile-menu-toggle focus-visible"
          aria-label="Toggle mobile menu"
          aria-expanded="false"
          aria-controls="mobile-menu"
          style="background: none; border: 1px solid var(--color-border); border-radius: var(--radius); padding: var(--space-2); cursor: pointer; color: var(--color-text); transition: all var(--transition-fast); width: 2.5rem; height: 2.5rem; display: flex; align-items: center; justify-content: center;"
        >
          <svg class="menu-icon" style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
          <svg class="close-icon hidden" style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
        
        {{/* Theme toggle for mobile */}}
        {{ partial "theme-toggle.html" . }}
      </div>
    </nav>
    
    {{/* Mobile Menu */}}
    <div 
      id="mobile-menu" 
      class="mobile-menu hidden"
      style="margin-top: var(--space-4); padding-top: var(--space-4); border-top: 1px solid var(--color-border);"
      aria-hidden="true"
    >
      {{ partial "navigation-menu.html" (dict "context" . "mobile" true) }}
    </div>
  </div>
</header>

{{/* Responsive CSS */}}
<style>
  /* Default: hide mobile navigation, show desktop */
  .nav-mobile {
    display: none;
  }
  
  .nav-desktop {
    display: flex;
    align-items: center;
    gap: var(--space-6);
  }
  
  /* Mobile: hide desktop navigation, show mobile */
  @media (max-width: 768px) {
    .nav-desktop {
      display: none;
    }
    .nav-mobile {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }
  }
  
  /* Mobile menu styles */
  .mobile-menu.hidden {
    display: none;
  }
  
  .mobile-menu {
    display: block;
  }
  
  .mobile-menu .nav-menu {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-3);
  }
  
  .mobile-menu .nav-submenu {
    margin-left: var(--space-4);
    margin-top: var(--space-2);
  }
</style>